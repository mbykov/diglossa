{"version":3,"sources":["webpack://glossa/../b/book-epub2json/dist/html.js","webpack://glossa/../b/book-epub2json/dist/index.js","webpack://glossa/../b/book-fb2json/dist/index.js","webpack://glossa/../b/book-pdf2json/dist/index.js","webpack://glossa/./src/background.js","webpack://glossa/./src/config.js","webpack://glossa/./src/i18n/about_menu_template.js","webpack://glossa/./src/i18n/book_menu_template.js","webpack://glossa/./src/i18n/dict_menu_template.js","webpack://glossa/./src/i18n/file_menu_template.js","webpack://glossa/./src/i18n/help_menu_template.js","webpack://glossa/./src/i18n/i18n.js","webpack://glossa/./src/i18n/lang_deu_menu_template.js","webpack://glossa/./src/i18n/lang_eng_menu_template.js","webpack://glossa/./src/i18n/lang_rus_menu_template.js","webpack://glossa/./src/i18n/lang_zho_menu_template.js","webpack://glossa/./src/i18n/menu-factory.js","webpack://glossa/external \"@babel/runtime/helpers/asyncIterator\"","webpack://glossa/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://glossa/external \"@babel/runtime/helpers/interopRequireDefault\"","webpack://glossa/external \"@babel/runtime/helpers/toConsumableArray\"","webpack://glossa/external \"@babel/runtime/regenerator\"","webpack://glossa/external \"book-md2json\"","webpack://glossa/external \"electron\"","webpack://glossa/external \"electron-store\"","webpack://glossa/external \"epub\"","webpack://glossa/external \"fs-extra\"","webpack://glossa/external \"iconv-lite\"","webpack://glossa/external \"iso-639-3\"","webpack://glossa/external \"jsdom\"","webpack://glossa/external \"lodash\"","webpack://glossa/external \"os\"","webpack://glossa/external \"path\"","webpack://glossa/external \"pdf-extraction\"","webpack://glossa/external \"unzipper\"","webpack://glossa/external \"url\"","webpack://glossa/external \"util\"","webpack://glossa/external \"xml-js\"","webpack://glossa/webpack/bootstrap","webpack://glossa/webpack/runtime/compat get default export","webpack://glossa/webpack/runtime/define property getters","webpack://glossa/webpack/runtime/hasOwnProperty shorthand","webpack://glossa/webpack/runtime/make namespace object","webpack://glossa/webpack/startup"],"names":["Object","value","exports","htmlChunk","_interopRequireDefault","require","epub2json","_regenerator","_asyncToGenerator2","_asyncIterator2","_lodash","_epub","_html","jsdom","JSDOM","iso6393","log","console","_x","_epub2json","apply","arguments","mark","_callee2","bpath","epub","meta","lang","iso","descr","toc","chapters","docs","zerodoc","wrap","_callee2$","_context3","prev","next","getEpub","sent","metadata","language","find","iso6391","type","author","creator","title","filter","manifest","chapter","order","map","id","getMDs","t0","level","md","join","unshift","abrupt","imgs","stop","Promise","resolve","reject","on","parse","fns","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_loop","_iterator","_step","_value","header","async","getMDs$","_context2","_ref","_callee","flowchapter","titledoc","html","docid","dom","loop","_callee$","_context","_loop2","node","nodes","childNodes","forEach","textContent","trim","cleanStr","doc","test","nodeName","slice","replace","pid","firstel","firstChild","includes","_id","footnote","aels","each","ael","_getRefnote","getRefnote","refnote","notepath","push","olines","children","el","i","length","getChapter","window","document","body","flow","awrap","done","finish","flatten","getAttribute","split","q","selector","frag","fragment","querySelector","error","zerofill","number","size","toString","str","fb2json","_toConsumableArray2","_","fse","path","util","unzipper","iconv","insp","o","inspect","convert","parseZip","_parseZip","fbpath","directory","file","Open","files","buffer","_x2","_fb2json","ext","errmess","fbobj","xml","fictionbook","fbels","description","headers","xtitle","extname","readFile","t1","t2","decode","xml2js","compact","ignoreDeclaration","ignoreComment","ignoreCdata","t3","elements","name","parseInfo","parseFB","descrs","xtitleInfo","xdocInfo","xpubInfo","titleInfo","stripElement","annotation","parseAuthor","parseParEls","getText","fb","rawbodies","notel","attributes","bdocs","parseDocs","notels","noteid","note","text","parseTitle","parseSection","sec","quotes","parseQuote","lines","parsePoem","els","texts","cleanText","par","emph","_text","_emph","_text2","_md","sup","_text3","_md2","ref","_par","_text4","Error","fname","mname","lname","getOnlyEl","xdoc","getEls","clean","titlel","poemdocs","stanza","vs","v","idx","vtexts","vel","qdocs","quotel","pdf2json","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","e","_e","f","TypeError","normalCompletion","didErr","err","step","_e2","minLen","_arrayLikeToArray","prototype","call","constructor","from","arr","len","arr2","pdf","options","pagerender","render_page","pageData","render_options","normalizeWhitespace","disableCombineTextItems","getTextContent","then","lastY","items","item","transform","_pdf2json","dataBuffer","readFileSync","data","info","Title","Author","parseText","res","removeSimpleColonTitle","pages","removeColonTitle","pagerows","page","row","testpages","pagesize","round","sum","testrows","rows","rowsize","parbr","parsigns","nonheaders","mds","idy","parseText_","rebreak","RegExp","rpages","strsize","_iterator2","_step2","rpage","pars","has_colon","possibleheads","uniq","freqs","_iterator3","_step3","_colon","colon","freq","countInArray","max","_iterator4","_step4","cpars","_iterator5","_step5","_page","_iterator6","_step6","_cpars","breakRow","flattenDeep","array","reduce","x","strs","Store","positionstore","createWindow","mainWindow","BrowserWindow","width","height","webPreferences","enableRemoteModule","nodeIntegrationInWorker","nodeIntegration","winBounds","get","getBounds","setBounds","loadURL","url","pathname","__dirname","protocol","slashes","webContents","event","preventDefault","openDevTools","global","templates","dgl","set","ipcMain","action","md2json","result","orbid","send","createPopup","popupWindow","frame","hasShadow","show","popupBounds","hide","app","config","MenuFactory","handleError","process","errorHandler","debounce","addEventListener","rejectionHandler","reason","host","port","version","defstate","batch_size","pageSize","splitSizes","langs","ldname","deflang","extpath","aboutMenuTemplate","menu","label","t","submenu","click","bookMenuTemplate","accelerator","dictMenuTemplate","fileMenuTemplate","os","href","helpMenuTemplate","shell","debugInfo","reloadIgnoringCache","toggleDevTools","platform","release","electron","remote","apath","getAppPath","content","newlang","loadedLanguage","i18n","phrase","langFile","localePath","pathExistsSync","readJsonSync","enPath","dcased","uncap","caped","capitalize","charAt","toUpperCase","toLowerCase","deuMenuTemplate","engMenuTemplate","rusMenuTemplate","zhoMenuTemplate","Menu","menus","setApplicationMenu","buildFromTemplate"],"mappings":"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CAAxB;AACD,C;;;;;;;;;;AC7CD,kE;;;;;;;;;;ACAA,qE;;;;;;;;;;ACAA,0E;;;;;;;;;;ACAA,sE;;;;;;;;;;ACAA,wD;;;;;;;;;;ACAA,0C;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,4C;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,wC;;;;;;;;;;ACAA,uC;;;;;;;;;;ACAA,mC;;;;;;;;;;ACAA,oC;;;;;;;;;;ACAA,gC;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,4C;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,iC;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,oC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"background.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.htmlChunk = void 0;\nvar htmlChunk = \"\\n\\n<H1 id=\\\"id_0\\\">_HEADER _ some header</p>\\n<p id=\\\"id_1\\\">par some text</p>\\n<p id=\\\"id_2\\\">par some other text </p>\\n<p id=\\\"id_3\\\">par with alink <a id=\\\"aid_1\\\" href=\\\"xxx#fn_1\\\">[[z1]]</a></p>\\n<p id=\\\"id_4\\\" class=\\\"ptext\\\">par p-text-par <a id=\\\"aid_2\\\" href=\\\"xxx#fn_2\\\">z2</a></p>\\n<p id=\\\"id_4-1\\\" class=\\\"ptext\\\">par p-text-par <a id=\\\"aid_2\\\" href=\\\"xxx#linknote-11\\\">z2</a></p>\\n<p id=\\\"id_4-2\\\" class=\\\"ptext\\\">par p-text-par <a id=\\\"aid_2\\\" href=\\\"xxx#linknote-12\\\">z2</a></p>\\n<ul id=\\\"ulid_1\\\" class=\\\"list\\\">\\n  <li id=\\\"liid_1\\\">line string 1</li>\\n  <li id=\\\"liid_2\\\">line string 2</li>\\n</ul>\\n<p id=\\\"fn_1\\\"> footnote fn_1 text </p>\\n<p id=\\\"fn_2\\\"> footnote fn_2 text </p>\\n<p id=\\\"id_2\\\">par some other text </p>\\n\\n<p>in astronomy and physics generally.</p>\\n<div class=\\\"fig c4\\\"><a id=\\\"illus03\\\"/> \\u201CQUADRANS MURALIS SIVE TICHONICUS.\\u201D\\n<p class=\\\"caption\\\">\\u201CQ<small>UADRANS</small> M<small>URALIS SIVE</small> T<small>ICHONICUS</small>.\\u201D<br/>\\nWith portrait of Tycho Brahe, instruments, etc., painted on the wall; showing assistants using the sight, watching the clock, and recording. (From the author\\u2019s copy of the <i>Astronomi\\xE6 Instaurat\\xE6 Mechanica</i>.)</p>\\n</div>\\n<hr/>\\n<p><b>FOOTNOTES:</b></p>\\n<p class=\\\"footnote\\\"><a id=\\\"linknote-11\\\"/> <a href=\\\"chapters/item11/OEBPS/@public@vhost@g@gutenberg@html@files@8172@8172-h@8172-h-6.htm.html#linknoteref-11\\\" class=\\\"pginternal\\\">[1]</a> For definition see p. 22.</p>\\n<p class=\\\"footnote\\\"><a id=\\\"linknote-12\\\"/> <a href=\\\"chapters/item11/OEBPS/@public@vhost@g@gutenberg@html@files@8172@8172-h@8172-h-6.htm.html#linknoteref-12\\\" class=\\\"pginternal\\\">[2]</a> <i>Ibid</i>.</p>\\n\\n\"; // practical value.<a id=\"FNanchor_76_76\"/><a href=\"chapters/item19/OEBPS/@public@vhost@g@gutenberg@html@files@39508@39508-h@39508-h-14.htm.html#Footnote_76_76\" class=\"fnanchor pginternal\">[76]</a></p>\n// <p><a id=\"Footnote_76_76\"></a><a href=\"chapters/item11/OEBPS/@public@vhost@g@gutenberg@html@files@39508@39508-h@39508-h-6.htm.html#FNanchor_76_76\" class=\"pginternal\"><span class=\"label\">[76]</span></a> I am well aware\n// <a - не первый child\n// - а в footnote - первый\n//\n// file:///tmp/.private/michael/atril-751/The_Myth_of_Sisyphus.epubBHBGP0/OEBPS/Text/Endnote05.xhtml\n// file:///tmp/.private/michael/atril-751/The_Myth_of_Sisyphus.epubBHBGP0/OEBPS/Text/Piece01.Chapter01.xhtml#endnote05\n// <i class=\"calibre3\">Jaiminiya Brahmana</i> (c. 600 BCE)<a href=\"doni_9781101028704_oeb_nts_r1_split_000.html#en388\" id=\"Ref-en388\"><sup class=\"calibre6\">2</sup></a>\n\nexports.htmlChunk = htmlChunk;","'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.epub2json = epub2json;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _asyncIterator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncIterator\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _epub = _interopRequireDefault(require(\"epub\"));\n\nvar _html = require(\"./html\");\n\nvar jsdom = require(\"jsdom\");\n\nvar JSDOM = jsdom.JSDOM;\n\nvar iso6393 = require('iso-639-3');\n\nvar log = console.log;\n\nfunction epub2json(_x) {\n  return _epub2json.apply(this, arguments);\n}\n\nfunction _epub2json() {\n  _epub2json = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(bpath) {\n    var epub, meta, lang, iso, descr, toc, chapters, docs, zerodoc;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return getEpub(bpath);\n\n          case 2:\n            epub = _context3.sent;\n            meta = epub.metadata;\n            lang = meta.language; // log('____EPUB epub.metadata', epub.manifest)\n\n            iso = _lodash[\"default\"].find(iso6393, function (iso) {\n              return iso.iso6391 == lang;\n            });\n            if (iso) lang = iso.iso6393;\n            descr = {\n              type: 'epub',\n              author: meta.creator,\n              title: meta.title,\n              lang: lang\n            }; // , description: meta\n\n            toc = _lodash[\"default\"].filter(epub.manifest, function (chapter) {\n              return chapter.order;\n            });\n            chapters = toc.map(function (chapter) {\n              return {\n                id: chapter.id,\n                title: chapter.title\n              };\n            }); // log('_chapters', chapters)\n\n            _context3.prev = 10;\n            _context3.next = 13;\n            return getMDs(epub, chapters);\n\n          case 13:\n            docs = _context3.sent;\n            _context3.next = 20;\n            break;\n\n          case 16:\n            _context3.prev = 16;\n            _context3.t0 = _context3[\"catch\"](10);\n            log('____EPUB IMPORT ERR', _context3.t0);\n            docs = [];\n\n          case 20:\n            zerodoc = {\n              level: 1,\n              md: [descr.author, descr.title].join(', ')\n            };\n            docs.unshift(zerodoc); // log('_META-TOC', epub.toc)\n            // log('_EPUB-docs', docs)\n\n            return _context3.abrupt(\"return\", {\n              descr: descr,\n              docs: docs,\n              imgs: []\n            });\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2, null, [[10, 16]]);\n  }));\n  return _epub2json.apply(this, arguments);\n}\n\nfunction getEpub(bpath) {\n  return new Promise(function (resolve, reject) {\n    var epub = new _epub[\"default\"](bpath, 'images', 'chapters');\n    epub.on(\"end\", function () {\n      resolve(epub);\n    });\n    epub.on('error', reject);\n    epub.parse();\n  });\n}\n\nfunction getMDs(epub, chapters) {\n  var docs, fns, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _loop, _iterator, _step, _value, header;\n\n  return _regenerator[\"default\"].async(function getMDs$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          docs = [];\n          fns = [];\n          _iteratorNormalCompletion = true;\n          _didIteratorError = false;\n          _context2.prev = 4;\n\n          _loop = /*#__PURE__*/function () {\n            var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n              var flowchapter, chapter, titledoc, html, docid, dom, loop;\n              return _regenerator[\"default\"].wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      loop = function _loop2(node) {\n                        var nodes = node.childNodes; // let first = true\n\n                        nodes.forEach(function (node) {\n                          if (!node.textContent) return;\n                          var md = node.textContent.trim();\n                          md = cleanStr(md);\n                          if (!md) return; // let doc = {_id: '', path: ''}\n\n                          var doc = {}; // if (first && chIDs.includes(flowchapter.id)) {\n                          //   doc.level = 3\n                          //   first = false\n                          // }\n\n                          if (/H\\d/.test(node.nodeName)) {\n                            doc.level = node.nodeName.slice(1) * 1;\n                            md = md.replace(/\\.$/, '');\n                          } else if (node.nodeName === 'DIV') {\n                            return;\n                          } else if (node.nodeName === 'P') {\n                            // footnotes, endnotes:\n                            var pid = node.id; // calibre v.2 <p id>\n\n                            if (!pid) {\n                              var firstel = node.firstChild; // gutenberg <p><a id>\n\n                              if (firstel && firstel.nodeName === 'A') pid = firstel.id;\n                            }\n\n                            if (fns.includes(pid)) {\n                              doc._id = ['ref', pid].join('-');\n                              doc.footnote = true;\n                            } else {\n                              // let aels = node.querySelectorAll('a') // electron security violation\n                              var aels = _lodash[\"default\"].filter(node.childNodes, function (node) {\n                                return node.nodeName == 'A';\n                              });\n\n                              _lodash[\"default\"].each(aels, function (ael) {\n                                var _getRefnote = getRefnote(ael),\n                                    refnote = _getRefnote.refnote,\n                                    notepath = _getRefnote.notepath;\n\n                                if (!notepath) return;\n                                if (!doc.refnote) doc.refnote = {}; // doc.refnote[refnote] = ['ref', notepath].join('-')\n\n                                doc.refnote[refnote] = notepath;\n                                fns.push(notepath);\n                              });\n                            }\n                          } else if (node.nodeName == 'UL') {\n                            var olines = node.children;\n\n                            _lodash[\"default\"].each(olines, function (el) {// LIST\n                            });\n                          } else {\n                            return;\n                          } // if nodeName\n\n\n                          doc.md = md;\n                          docs.push(doc);\n                        }); // each node\n\n                        for (var i = 0; i < nodes.length; i++) {\n                          if (!nodes[i]) continue;\n\n                          if (nodes[i].childNodes.length > 0) {\n                            loop(nodes[i]);\n                          }\n                        }\n                      };\n\n                      flowchapter = _value;\n                      chapter = chapters.find(function (chapter) {\n                        return chapter.id == flowchapter.id;\n                      });\n\n                      if (chapter) {\n                        titledoc = {\n                          level: 2,\n                          md: chapter.title\n                        };\n                        docs.push(titledoc);\n                      }\n\n                      _context.next = 6;\n                      return getChapter(epub, flowchapter.id);\n\n                    case 6:\n                      html = _context.sent;\n                      // log('_HTML====================================\\n', flowchapter.id, html.length)\n                      html = html.replace(/\\/>/g, '/></a>'); // jsdom xhtml feature\n\n                      docid = 0;\n                      dom = new JSDOM(html); // dom = new JSDOM(html, {contentType: \"application/xhtml+xml\"})\n                      // dom = new JSDOM(html, {contentType: \"text/html\"})\n\n                      loop(dom.window.document.body); // loop\n\n                    case 11:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function _loop() {\n              return _ref.apply(this, arguments);\n            };\n          }();\n\n          _iterator = (0, _asyncIterator2[\"default\"])(epub.flow);\n\n        case 7:\n          _context2.next = 9;\n          return _regenerator[\"default\"].awrap(_iterator.next());\n\n        case 9:\n          _step = _context2.sent;\n          _iteratorNormalCompletion = _step.done;\n          _context2.next = 13;\n          return _regenerator[\"default\"].awrap(_step.value);\n\n        case 13:\n          _value = _context2.sent;\n\n          if (_iteratorNormalCompletion) {\n            _context2.next = 20;\n            break;\n          }\n\n          _context2.next = 17;\n          return _regenerator[\"default\"].awrap(_loop());\n\n        case 17:\n          _iteratorNormalCompletion = true;\n          _context2.next = 7;\n          break;\n\n        case 20:\n          _context2.next = 26;\n          break;\n\n        case 22:\n          _context2.prev = 22;\n          _context2.t0 = _context2[\"catch\"](4);\n          _didIteratorError = true;\n          _iteratorError = _context2.t0;\n\n        case 26:\n          _context2.prev = 26;\n          _context2.prev = 27;\n\n          if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n            _context2.next = 31;\n            break;\n          }\n\n          _context2.next = 31;\n          return _regenerator[\"default\"].awrap(_iterator[\"return\"]());\n\n        case 31:\n          _context2.prev = 31;\n\n          if (!_didIteratorError) {\n            _context2.next = 34;\n            break;\n          }\n\n          throw _iteratorError;\n\n        case 34:\n          return _context2.finish(31);\n\n        case 35:\n          return _context2.finish(26);\n\n        case 36:\n          header = docs.find(function (doc) {\n            return doc.level > -1;\n          });\n          if (!header) header = docs[0], header.level = 1;\n          return _context2.abrupt(\"return\", _lodash[\"default\"].flatten(docs));\n\n        case 39:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[4, 22, 26, 36], [27,, 31, 35]], Promise);\n}\n\nfunction getRefnote(ael) {\n  var notepath = ael.getAttribute('href');\n  if (!notepath) return {\n    refnote: null\n  };\n  notepath = notepath.split('#')[1];\n  if (!notepath) return {\n    refnote: null\n  };\n  notepath = notepath.replace(/ref-/g, '');\n  var refnote = ael.textContent.replace(/\\[/g, '').replace(/\\]/g, '').replace(/ref-/g, '');\n  if (refnote.length > 3) return {\n    refnote: null\n  }; // not footnotes\n\n  return {\n    refnote: refnote,\n    notepath: notepath\n  };\n}\n\nfunction q(html, selector) {\n  var frag = JSDOM.fragment(html);\n  return frag.querySelector(selector);\n}\n\nfunction getChapter(epub, id) {\n  return new Promise(function (resolve, reject) {\n    epub.getChapter(id, function (error, html) {\n      resolve(html);\n    });\n  });\n}\n\nfunction zerofill(number, size) {\n  number = number.toString();\n\n  while (number.length < size) {\n    number = \"0\" + number;\n  }\n\n  return number;\n}\n\nfunction cleanStr(str) {\n  // return str.replace(/\\n+/g, '\\n').replace(/↵+/, '\\n').replace(/  +/, ' ') // .replace(/\\s+/, ' ')\n  return str.replace(/\\n+/g, ' ').replace(/↵+/, '\\n').replace(/  +/, ' '); // .replace(/\\s+/, ' ')\n  // todo: проверить - см Camus, La Chute - короткие строки имеющие \\n в конце каждой\n}","'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fb2json = fb2json;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _ = require('lodash');\n\nvar fse = require('fs-extra');\n\nvar path = require(\"path\");\n\nvar log = console.log;\n\nvar util = require(\"util\");\n\nvar unzipper = require('unzipper');\n\nvar iconv = require('iconv-lite');\n\nvar iso6393 = require('iso-639-3'); // let decoder = new util.TextDecoder('utf-8')\n\n\nvar insp = function insp(o) {\n  return log(util.inspect(o, false, null));\n};\n\nvar convert = require('xml-js');\n\nfunction parseZip(_x) {\n  return _parseZip.apply(this, arguments);\n}\n\nfunction _parseZip() {\n  _parseZip = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(fbpath) {\n    var directory, file;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return unzipper.Open.file(fbpath);\n\n          case 2:\n            directory = _context.sent;\n            file = directory.files[0];\n            _context.next = 6;\n            return file.buffer();\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseZip.apply(this, arguments);\n}\n\nfunction fb2json(_x2) {\n  return _fb2json.apply(this, arguments);\n}\n\nfunction _fb2json() {\n  _fb2json = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(fbpath) {\n    var ext, buffer, errmess, fbobj, xml, fictionbook, fbels, description, descr, docs, imgs, headers, md, xtitle;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            ext = path.extname(fbpath);\n            _context2.prev = 1;\n\n            if (!(ext == '.zip')) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 5;\n            return parseZip(fbpath);\n\n          case 5:\n            _context2.t0 = _context2.sent;\n            _context2.next = 16;\n            break;\n\n          case 8:\n            if (!(ext == '.fb2')) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 11;\n            return fse.readFile(fbpath);\n\n          case 11:\n            _context2.t1 = _context2.sent;\n            _context2.next = 15;\n            break;\n\n          case 14:\n            _context2.t1 = null;\n\n          case 15:\n            _context2.t0 = _context2.t1;\n\n          case 16:\n            buffer = _context2.t0;\n            _context2.next = 23;\n            break;\n\n          case 19:\n            _context2.prev = 19;\n            _context2.t2 = _context2[\"catch\"](1);\n            errmess = 'not .fb2 file';\n            return _context2.abrupt(\"return\", {\n              descr: errmess\n            });\n\n          case 23:\n            _context2.prev = 23;\n            xml = buffer.toString();\n\n            if (/1251/.test(xml.split('\\n')[0])) {\n              buffer = iconv.decode(buffer, 'cp1251');\n              xml = buffer.toString();\n            }\n\n            fbobj = convert.xml2js(xml, {\n              compact: false,\n              trim: true,\n              ignoreDeclaration: true,\n              ignoreComment: true,\n              ignoreCdata: true\n            });\n            _context2.next = 33;\n            break;\n\n          case 29:\n            _context2.prev = 29;\n            _context2.t3 = _context2[\"catch\"](23);\n            errmess = 'can not read .fb2 file';\n            return _context2.abrupt(\"return\", {\n              descr: errmess\n            });\n\n          case 33:\n            fictionbook = _.find(fbobj.elements, function (el) {\n              return el.name == 'FictionBook';\n            });\n\n            if (fictionbook) {\n              _context2.next = 36;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              descr: 'empty .fb2 file'\n            });\n\n          case 36:\n            fbels = fictionbook.elements;\n            description = _.find(fbels, function (el) {\n              return el.name == 'description';\n            });\n            if (fbels) descr = parseInfo(description);else descr = {\n              author: 'no author',\n              title: 'no title',\n              lang: 'no lang'\n            };\n            docs = parseFB(fbels);\n            imgs = [];\n            headers = docs.filter(function (doc) {\n              return doc.level;\n            });\n\n            if (!headers.length) {\n              docs[0].level = 1;\n            } else if (!headers.filter(function (doc) {\n              return doc.level == 1;\n            }).length) {\n              md = [descr.author, descr.title].join('. ');\n              xtitle = {\n                md: md,\n                level: 1\n              };\n              docs.unshift(xtitle);\n            }\n\n            return _context2.abrupt(\"return\", {\n              descr: descr,\n              docs: docs,\n              imgs: imgs\n            });\n\n          case 44:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 19], [23, 29]]);\n  }));\n  return _fb2json.apply(this, arguments);\n}\n\nfunction parseInfo(description) {\n  var descr = {};\n  var descrs = description.elements;\n\n  var xtitleInfo = _.find(descrs, function (el) {\n    return el.name == 'title-info';\n  });\n\n  var xdocInfo = _.find(descrs, function (el) {\n    return el.name == 'document-info';\n  });\n\n  var xpubInfo = _.find(descrs, function (el) {\n    return el.name == 'publish-info';\n  });\n\n  var titleInfo = stripElement(xtitleInfo);\n  var annotation;\n  var lang;\n  if (titleInfo.author) descr.author = parseAuthor(titleInfo.author);\n  if (titleInfo.annotation) annotation = parseParEls(titleInfo.annotation);\n  if (titleInfo['book-title']) descr.title = getText(titleInfo['book-title']);\n  if (titleInfo.lang) lang = getText(titleInfo.lang);\n\n  if (lang) {\n    var iso = _.find(iso6393, function (iso) {\n      return iso.iso6391 == lang;\n    });\n\n    if (iso) lang = iso.iso6393;\n    descr.lang = lang;\n  }\n\n  if (annotation) descr.annotation = annotation;\n  return descr;\n}\n\nfunction parseFB(fb) {\n  var docs = [];\n  var rawbodies = fb.filter(function (el) {\n    return el.name == 'body';\n  });\n  var body = rawbodies.find(function (el) {\n    return el.name == 'body';\n  });\n\n  var notel = _.find(rawbodies, function (body) {\n    return body.attributes && body.attributes.name == 'notes';\n  }); // bodies.forEach(body=> {\n\n\n  var bdocs = parseDocs(body);\n  docs.push.apply(docs, (0, _toConsumableArray2[\"default\"])(bdocs)); // })\n\n  var notels = notel ? notel.elements : [];\n  var noteid, refnote;\n  notels.forEach(function (notel) {\n    var note = {\n      footnote: true\n    };\n    notel.elements.forEach(function (el) {\n      if (el.name == 'title') refnote = el.elements[0].elements[0].text;else if (el.name == 'p') note.md = el.elements[0].text;\n    });\n    if (!refnote) return;\n    noteid = refnote.replace('[', '').replace(']', '');\n    note._id = ['ref', noteid].join('-');\n    docs.push(note);\n  });\n  return docs;\n}\n\nfunction parseDocs(body) {\n  var docs = []; // let els = body.elements\n\n  var level = 1;\n  body.elements.forEach(function (el) {\n    if (el.name == 'title') {\n      parseTitle(docs, el, level);\n    } else if (el.name == 'section') {\n      parseSection(docs, level, el);\n    } else {// log('___ELSE', el)\n    }\n  });\n  return docs;\n}\n\nfunction parseSection(docs, level, sec) {\n  level += 1;\n  if (!sec) return;\n  sec.elements.forEach(function (el) {\n    if (el.name == 'title') {\n      parseTitle(docs, el, level);\n    } else if (el.name == 'section') {\n      parseSection(docs, level, el);\n    } else if (el.name == 'cite') {\n      var quotes = parseQuote(el.elements);\n      docs.push.apply(docs, (0, _toConsumableArray2[\"default\"])(quotes));\n    } else if (el.name == 'poem') {\n      var lines = parsePoem(el.elements);\n      docs.push.apply(docs, (0, _toConsumableArray2[\"default\"])(lines));\n    } else if (el.name == 'p') {\n      var doc = parseParEls(el.elements);\n      docs.push(doc);\n    } else {// log('___ELSE', el)\n      // empty-line\n      // image\n    }\n  });\n}\n\nfunction parseParEls(els) {\n  var doc = {};\n  var texts = [];\n  els.forEach(function (el) {\n    if (el.type == 'text') {\n      var text = cleanText(el.text);\n      texts.push(text);\n    } else if (el.type == 'element' && el.name == 'p') {\n      var par = parseParEls(el.elements);\n      texts.push(par.md);\n    } else if (el.type == 'element' && el.name == 'emphasis') {\n      if (!el.elements) return;\n      var emph = el.elements[0];\n\n      var _text = cleanText(emph.text);\n\n      var md = ['_', _text, '_'].join('');\n      texts.push(md);\n    } else if (el.type == 'element' && el.name == 'strong') {\n      if (!el.elements) return;\n      var _emph = el.elements[0];\n\n      var _text2 = cleanText(_emph.text);\n\n      var _md = ['*', _text2, '*'].join('');\n\n      texts.push(_md);\n    } else if (el.type == 'element' && el.name == 'sup') {\n      if (!el.elements || el.elements.length) return;\n      var sup = el.elements[0];\n      var _text3 = sup.elements[0].text;\n      var _md2 = _text3;\n      texts.push(_md2);\n    } else if (el.type == 'element' && el.name == 'a') {\n      if (!el.elements[0].text) return;\n      var ref = el.elements[0].text.replace('[', '').replace(']', '');\n      var refnote = ['[', ref, ']'].join('');\n      texts.push(refnote);\n      if (!doc.refnote) doc.refnote = {};\n      doc.refnote[ref] = ref;\n    } else if (el.type == 'element' && el.name == 'stanza') {\n      var _par = parseParEls(el.elements);\n\n      texts.push(_par.md);\n    } else if (el.type == 'element' && el.name == 'v') {\n      var _text4 = cleanText(el.elements[0].text);\n\n      log('_LIST', el);\n      texts.push(_text4);\n      doc.type = 'list';\n    } else if (el.type == 'element' && el.name == 'style') {\n      return;\n    } else if (el.type == 'element' && el.name == 'empty-line') {\n      return;\n    } else if (el.type == 'element' && el.name == 'title') {\n      return; // // could be used as note reference:\n      // try {\n      //   let ref = el.elements[0].elements[0].text.replace('[', '').replace(']', '')\n      //   let footnote = ['[', ref, ']: '].join('')\n      //   texts.push(footnote)\n      //   throw new Error()\n      // } catch(err) {\n      //   log('FN ERR: some error')\n      // }\n    } else {\n      // todo: ===================== finish stuff elements\n      console.log('ERR: FB2 NOT EL:', el);\n      throw new Error('NOT A PAR TEXT'); // todo: del\n    }\n  });\n  doc.md = texts.join(' ').trim();\n  if (doc.type == 'list') log('_DL', doc);\n  return doc;\n}\n\nfunction parseAuthor(els) {\n  var fname = _.find(els, function (el) {\n    return el.name == 'first-name';\n  });\n\n  var mname = _.find(els, function (el) {\n    return el.name == 'middle-name';\n  });\n\n  var lname = _.find(els, function (el) {\n    return el.name == 'last-name';\n  });\n\n  var author = [getOnlyEl(fname), getOnlyEl(mname), getOnlyEl(lname)].join(' ');\n  return author;\n}\n\nfunction stripElement(xdoc) {\n  var doc = {};\n  if (xdoc.type == 'element') doc = getEls(xdoc);else if (xdoc.type == 'text') doc.text = getText(xdoc);\n  return doc;\n}\n\nfunction getEls(xdoc) {\n  var doc = {};\n  xdoc.elements.forEach(function (el) {\n    doc[el.name] = el.elements;\n  });\n  return doc;\n}\n\nfunction getOnlyEl(xdoc) {\n  if (!xdoc || !xdoc.elements || !xdoc.elements.length) return '';\n  var el = xdoc.elements[0];\n  var text = el.text ? el.text : '';\n  return text;\n}\n\nfunction getText(xdoc) {\n  var el = xdoc[0];\n  var text = el.text ? cleanText(el.text) : '';\n  return text;\n}\n\nfunction cleanText(str) {\n  if (!str) return '';\n  var clean = str.replace(/\\s\\s+/g, ' ');\n  return clean;\n}\n\nfunction parseTitle(docs, xtitle, level) {\n  if (!xtitle.elements) return;\n  xtitle.elements.forEach(function (titlel) {\n    var titledoc = parseParEls(titlel.elements);\n    titledoc.level = level;\n    if (titledoc.md) docs.push(titledoc);\n  });\n}\n\nfunction parsePoem(els) {\n  var poemdocs = [];\n  els.forEach(function (stanza) {\n    var vs = stanza.elements.filter(function (v) {\n      return v.name == 'v';\n    });\n    vs.forEach(function (v, idx) {\n      var vtexts = v.elements.filter(function (v) {\n        return v.text;\n      });\n      vtexts.forEach(function (vel) {\n        var doc = {\n          md: vel.text,\n          type: 'list'\n        };\n        if (!idx) doc.type = 'ulist';\n        if (doc.md) poemdocs.push(doc);\n      });\n    });\n  });\n  return poemdocs;\n}\n\nfunction parseQuote(els) {\n  var qdocs = [];\n  els.forEach(function (quotel) {\n    if (!quotel.elements) return;\n    var doc = {\n      md: quotel.elements[0].text,\n      type: 'quote'\n    }; // log('_QQ', quotel)\n\n    if (doc.md) qdocs.push(doc);\n  });\n  return qdocs;\n}","'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pdf2json = pdf2json;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar path = require(\"path\");\n\nvar log = console.log;\n\nvar fse = require('fs-extra');\n\nvar pdf = require(\"pdf-extraction\");\n\nvar options = {\n  pagerender: render_page\n};\n\nfunction render_page(pageData) {\n  var render_options = {\n    normalizeWhitespace: true,\n    disableCombineTextItems: false\n  };\n  return pageData.getTextContent(render_options).then(function (textContent) {\n    var lastY,\n        text = \"PAGE_BREAK\\n\"; // log('_TC', textContent.items)\n\n    var _iterator = _createForOfIteratorHelper(textContent.items),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n\n        if (lastY == item.transform[5] || !lastY) {\n          text += item.str;\n        } else {\n          text += \"\\n\" + item.str;\n        }\n\n        lastY = item.transform[5];\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return text.trim();\n  })[\"catch\"](function (err) {\n    log('_ERR-text', err);\n  });\n}\n\nfunction pdf2json(_x) {\n  return _pdf2json.apply(this, arguments);\n}\n/*\n  считаю к-во строк на стр, длинну строки\n  убираю колонтитулы\n  ставлю заголовки\n\n*/\n\n\nfunction _pdf2json() {\n  _pdf2json = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(bpath) {\n    var dataBuffer;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dataBuffer = fse.readFileSync(bpath);\n            return _context.abrupt(\"return\", pdf(dataBuffer, options).then(function (data) {\n              var descr = {\n                title: data.info.Title || 'title',\n                author: data.info.Author || 'author'\n              };\n              var docs = parseText(data.text);\n              var title = {\n                md: descr.title,\n                level: 1\n              };\n              docs.unshift(title);\n              var res = {\n                descr: descr,\n                docs: docs,\n                imgs: []\n              };\n              return res;\n            })[\"catch\"](function (err) {\n              log('_ERR PDF', err);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _pdf2json.apply(this, arguments);\n}\n\nfunction removeSimpleColonTitle(pages) {\n  return pages;\n}\n\nfunction removeColonTitle(pages) {\n  return pages;\n}\n\nfunction parseText(str) {\n  str = str.replace(/\\n\\n+/g, '\\n');\n  var pages = str.split('PAGE_BREAK');\n  var pagerows = pages.map(function (page) {\n    return page.split('\\n').map(function (row) {\n      return row.trim();\n    }).filter(function (row) {\n      return row;\n    });\n  }).filter(function (page) {\n    return page.length;\n  });\n  var testpages = pagerows.slice(25, pages.length - 25);\n\n  var pagesize = _lodash[\"default\"].round(_lodash[\"default\"].sum(testpages.map(function (testrows) {\n    return testrows.length;\n  })) / testpages.length);\n\n  var rows = _lodash[\"default\"].flatten(testpages.map(function (testrows) {\n    return testrows;\n  })).filter(function (row) {\n    return row;\n  });\n\n  var rowsize = _lodash[\"default\"].round(_lodash[\"default\"].sum(rows.map(function (row) {\n    return row.length;\n  })) / rows.length);\n\n  log('_PS', pagesize);\n  log('_RS', rowsize);\n\n  var parbr = _lodash[\"default\"].round(rowsize * 0.75);\n\n  log('_PBR', parbr);\n  pages = removeSimpleColonTitle(pages);\n  pages = removeColonTitle(pages);\n  var docs = [];\n  var parsigns = '.?:]!0123456789'.split('');\n  var nonheaders = '–'.split('');\n  var prev = '';\n  var doc = {};\n  var mds = [];\n  pagerows.forEach(function (rows, idy) {\n    // if (idy < 4) return\n    // if (idy > 20) return\n    // log('_PAGE-rows:', idy, rows, '______end-rows')\n    rows.forEach(function (row, idx) {\n      if (prev.length <= parbr) {\n        doc.md = mds.join(' ');\n        if (mds.length) docs.push(doc);\n        doc = {};\n        mds = [row]; // if (!idx) docs.push({pb__________________: idy})\n\n        if (!idx && rows.length <= pagesize / 1.5 && row.length <= rowsize / 2) doc.level = 2;\n      } else {\n        mds.push(row);\n      }\n\n      prev = row;\n    });\n  }); // docs = docs.slice(50,60)\n\n  var headers = docs.filter(function (doc) {\n    return doc.level;\n  }); // log('_BPS', docs)\n\n  return docs;\n}\n\nfunction parseText_(str) {\n  str = str.replace(/\\n\\n+/g, '\\n'); // log('__str__', str)\n\n  return [];\n  str = cleanStr(str);\n  var rebreak = new RegExp('\\n\\n+');\n  str = str.replace(/ \\n/g, '\\n').replace(/\\n+PAGE_BREAK/g, '\\nPAGE_BREAK').trim();\n  log('_____str', str.length); // PAGE_BREAK - before - . : ? \" ] ! \\d * ;\n  // return []\n\n  var rpages = str.split('PAGE_BREAK');\n  var strsize = 0;\n  var pages = [];\n\n  var _iterator2 = _createForOfIteratorHelper(rpages),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var rpage = _step2.value;\n      rpage = rpage.trim();\n      if (!rpage) continue;\n      var pars = rpage.trim().replace(/ \\n/g, '\\n').split(rebreak);\n      pars = pars.filter(function (par) {\n        return par;\n      }); // remove digits-only colons:\n\n      var test = pars[pars.length - 1];\n      if (/^\\d+$/.test(test)) pars = pars.slice(0, -1);\n      test = pars[0];\n      if (/^\\d+$/.test(test)) pars = pars.slice(1);\n      var rows = pars.map(function (par) {\n        return par.trim().split('\\n');\n      });\n      rows = rows.filter(function (row) {\n        return row;\n      });\n      if (rows.length) pages.push(rows);\n    } // remove possible colons:\n\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  var has_colon = false;\n  var possibleheads = pages.map(function (page) {\n    return page[0][0];\n  });\n\n  var uniq = _lodash[\"default\"].uniq(possibleheads);\n\n  if (possibleheads.length / uniq.length > 10) has_colon = true; // has_colon = true\n\n  if (has_colon) {\n    var freqs = [];\n\n    var _iterator3 = _createForOfIteratorHelper(uniq),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _colon = _step3.value;\n        freqs.push({\n          colon: _colon,\n          freq: countInArray(possibleheads, _colon)\n        });\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    var max = _lodash[\"default\"].max(freqs, 'freq');\n\n    var colon = max.colon;\n\n    var _iterator4 = _createForOfIteratorHelper(pages),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var page = _step4.value;\n        if (page[0][0] === colon) page[0] = page[0].slice(1);\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n  } // //compact pages\n  // pages = pages.map(page=> {\n  //   return page.filter(par=> par.length)\n  // })\n\n\n  pages = _lodash[\"default\"].flatten(pages.filter(function (page) {\n    return page.length;\n  }));\n  log('_____pages', pages);\n  return [];\n  pages.forEach(function (page) {\n    page[0][0] = 'HEAD-' + page[0][0];\n  });\n  log('_____pages', pages);\n  return [];\n  var cpars = [],\n      row;\n\n  var _iterator5 = _createForOfIteratorHelper(pages),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var _page = _step5.value;\n\n      var _iterator6 = _createForOfIteratorHelper(_page),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _cpars;\n\n          var par = _step6.value;\n          row = par.join('\\n');\n\n          (_cpars = cpars).push.apply(_cpars, (0, _toConsumableArray2[\"default\"])(breakRow(row)));\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  cpars = _lodash[\"default\"].flattenDeep(cpars);\n  var text = cpars.join('BREAK'); // text = text.trim().replace(/\\s\\s+/g, ' ')\n\n  text = text.replace(/BREAKHEAD-/, '');\n  var mds = text.split('BREAK');\n  var docs = mds.map(function (par) {\n    var doc = {\n      md: par\n    };\n\n    if (/HEAD-/.test(par)) {\n      doc.md = par.slice(5);\n      if (par.length < 50) doc.level = 2;\n    }\n\n    return doc;\n  });\n  return docs;\n}\n\nfunction cleanStr(str) {\n  if (!str) return ''; // let clean = str.trim().replace(/\\s\\s+/g, ' ')\n\n  var clean = str.replace(/“/g, '\"').replace(/”/g, '\"').replace(/»/g, '\"').replace(/«/g, '\"').replace(/\\t/g, ' ').replace(/ +/g, ' ');\n  return clean;\n}\n\nfunction countInArray(array, value) {\n  return array.reduce(function (n, x) {\n    return n + (x === value);\n  }, 0);\n}\n\nfunction breakRow(row) {\n  row = row.replace(/\\nPAGE_BREAK/g, 'PAGE_BREAK');\n  row = row.replace(/\\\"\\n\\\"/g, '\"BREAK\"');\n  row = row.replace(/([A-Z])\\n([A-Z])/g, \"$1BREAK$2\");\n  row = row.replace(/\\.\\n\\\"/g, '.BREAK\"').replace(/\\?\\n\\\"/g, '?BREAK\"');\n  row = row.replace(/\\\"\\n([A-Z])/g, \"\\\"BREAK$1\");\n  row = row.replace(/\\.\\n([A-Z])/g, \".BREAK$1\");\n  row = row.replace(/\\?\\n([A-Z])/g, \"?BREAK$1\");\n  row = row.replace(/\\n/g, \" \");\n  var strs = row.split('BREAK');\n  return strs;\n}","import path from \"path\";\nimport url from \"url\";\nimport { app, BrowserWindow, ipcMain, shell } from \"electron\";\n\nimport { config } from \"./config\";\n\nimport { fb2json } from '../../../b/book-fb2json'\n// import { fb2json } from 'book-fb2json'\nimport { epub2json } from '../../../b/book-epub2json'\n// import { epub2json } from 'book-epub2json' // ??? нету\n// import { md2json } from '../../../b/book-md2json'\nimport { md2json } from 'book-md2json'\nimport { pdf2json } from '../../../b/book-pdf2json'\n// import { pdf2json } from 'book-pdf2json'\n\nconst Store = require('electron-store')\nconst positionstore = new Store({name: 'bounds'})\nimport { MenuFactory } from \"./i18n/menu-factory\"\n\n// Special module holding environment variables which you declared\n// in config/env_xxx.json file.\n// import env from \"env\";\n\nconst createWindow = () => {\n  const mainWindow = new BrowserWindow({\n    width: 800,\n    height: 600,\n    webPreferences: {\n      enableRemoteModule: true,\n      nodeIntegrationInWorker: true,\n      nodeIntegration: true\n    }\n  });\n\n  let winBounds = positionstore.get('main') || mainWindow.getBounds()\n  mainWindow.setBounds(winBounds)\n\n  mainWindow.loadURL(\n    url.format({\n      pathname: path.join(__dirname, \"app.html\"),\n      protocol: \"file:\",\n      slashes: true\n    })\n  );\n\n  mainWindow.webContents.on('will-navigate', (event) => {\n    event.preventDefault()\n  })\n\n  mainWindow.webContents.openDevTools();\n  global.templates = {}\n  global.dgl = {}\n\n  mainWindow.on('close', () => {\n    positionstore.set('main', mainWindow.getBounds())\n  })\n  // mainWindow.on('resize', () => {\n  //   positionstore.set('main', mainWindow.getBounds())\n  // })\n\n  ipcMain.on('importBook', async (event, data) => {\n    let bpath = data.bpath\n    let ext = path.extname(data.bpath)\n    if (!ext) return false\n    let type = ext.replace(/^\\./, '')\n    if (type == 'zip') type = bpath.split('.').slice(-2).join('.')\n\n    let action\n    if (type == 'epub') action = epub2json\n    else if (type == 'fb2') action = fb2json\n    else if (type == 'fb2.zip') action = fb2json\n    else if (type == 'pdf') action = pdf2json\n    // else if (type == 'html') action = html2json\n    else if (type == 'md') action = md2json\n    else return {descr: 'book extension should be .epub, .fb2, .fb2.zip, .md or .dgl'}\n\n    let result = await action(bpath)\n    result.type = type\n    result.bpath = bpath\n    if (data.orbid) result.orbid = data.orbid\n    mainWindow.webContents.send('importBookResult', result)\n  })\n}\n\n\nconst createPopup = () => {\n\n  const popupWindow = new BrowserWindow({\n    width: 200,\n    height: 300,\n    frame: false,\n    hasShadow: true,\n    show: false,\n    webPreferences: {\n      // enableRemoteModule: true,\n      nodeIntegration: true\n    }\n  });\n\n  let popupBounds = positionstore.get('popup') || popupWindow.getBounds()\n  popupWindow.setBounds(popupBounds)\n\n  // and load the index.html of the app.\n  popupWindow.loadURL(\n    url.format({\n      pathname: path.join(__dirname, \"popup.html\"),\n      protocol: \"file:\",\n      slashes: true\n    })\n  );\n\n  // Open the DevTools.\n  // popupWindow.webContents.openDevTools();\n\n  popupWindow.webContents.on('will-navigate', (event) => {\n    event.preventDefault()\n  })\n\n  ipcMain.on('show-popup-window', (event, data) => {\n    popupWindow.show()\n    popupWindow.webContents.send('data', data)\n  })\n\n  ipcMain.on('hide-popup-window', (event) => {\n    popupWindow.hide()\n  })\n\n  popupWindow.on('close', () => {\n    positionstore.set('popup', popupWindow.getBounds())\n  })\n  // popupWindow.on('resize', () => {\n  //   positionstore.set('popup', popupWindow.getBounds())\n  // })\n}\n\n\napp.on(\"window-all-closed\", () => {\n  app.quit();\n});\n\napp.on(\"ready\", () => {\n  let lang = config.deflang\n  MenuFactory(lang)\n})\n\napp.on('ready', createPopup);\napp.on('ready', createWindow);\n\nipcMain.on('lang', (event, lang) => {\n  console.log('_LANG', lang)\n  MenuFactory(lang)\n})\n\nconst handleError = (title, error) => {\n  console.log('_B HE title', title)\n  console.log('_B HE ERR', error)\n}\n\nconsole.log('_TYPE ', process.type)\n\nif (process.type === 'renderer') {\n\tconst errorHandler = _.debounce(error => {\n\t\thandleError('Unhandled Error', error);\n\t}, 200);\n\twindow.addEventListener('error', event => {\n\t\tevent.preventDefault();\n\t\terrorHandler(event.error || event);\n\t});\n\n\tconst rejectionHandler = _.debounce(reason => {\n\t\thandleError('Unhandled Promise Rejection', reason);\n\t}, 200);\n\twindow.addEventListener('unhandledrejection', event => {\n\t\tevent.preventDefault();\n\t\trejectionHandler(event.reason);\n\t});\n} else {\n\tprocess.on('uncaughtException', error => {\n\t\thandleError('Unhandled Error', error);\n\t});\n\n\tprocess.on('unhandledRejection', error => {\n\t\thandleError('Unhandled Promise Rejection', error);\n\t});\n}\n","//\n\nexport const config = {\n  host: 'http://diglossa.org',\n  port: '5984',\n  version: 'https://github.com/mbykov/diglossa.js/releases/latest',\n  defstate: 'library',\n  batch_size: 1000,\n  pageSize: 25,\n  splitSizes: [100, 0],\n  langs: ['eng', 'deu', 'rus'],\n  ldname: 'local',\n  deflang: 'eng',\n  extpath: './diglossa.export.fts'\n}\n","import { app, BrowserWindow } from \"electron\";\nimport { i18n as t } from \"./i18n\";\nlet log  = console.log\n\nexport function aboutMenuTemplate() {\n  let menu =  {\n    label: t('about'),\n\n    submenu: [\n      {  label: t('essence '), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'essence') } },\n\n      {  label: t('about'), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'about') } },\n\n      {  label: t('acknowledgements'), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'acknowledgements') } },\n\n      {  label: t('code'), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'code') } },\n\n      {  label: t('contacts'), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'contacts') } },\n\n      {  label: t('license'), click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'license') } },\n\n    ]\n  }\n  return menu\n}\n","import { app, BrowserWindow } from \"electron\";\nimport { i18n as t } from \"./i18n\";\nlet log  = console.log\n\nexport function bookMenuTemplate() {\n  let menu =  {\n    label: t(\"book\"),\n    submenu: [\n      {  label: t(\"library\"),\n         accelerator: \"CmdOrCtrl+L\",\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'library') } },\n\n      {  label: t(\"bookmarks\"),\n         // accelerator: \"CmdOrCtrl+B\",\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'bookmarks') } },\n\n      { type: \"separator\" },\n      { label: \"Import book\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('importBook') } },\n      { label: \"Add parallel book\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('addParallelBook') } },\n      { label: \"Generate FTS\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('generateFTS') } },\n\n      { type: \"separator\" },\n      // { label: \"Book package preferences\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'prefs') } },\n      { label: \"Export to .dgl package\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'preference') } },\n\n      // { type: \"separator\" },\n\n      { label: \"Compress package\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('compress') } },\n      { label: \"Uncompress package\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('uncompress') } },\n      // { label: \"Publish\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('publishDGL') } },\n\n    ]\n  }\n  return menu\n}\n","import { app, BrowserWindow } from \"electron\";\nimport { i18n as t } from \"./i18n\";\nlet log  = console.log\n\nexport function dictMenuTemplate() {\n  let menu =  {\n    label: t(\"dictionary\"),\n    submenu: [\n      {  label: t(\"dictionary list\"),\n         // accelerator: \"CmdOrCtrl+D\", ======= ли то, либо это\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'dictionary') } },\n\n      { type: \"separator\" },\n      { label: \"Import StarDict .ifo\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('importDict') } },\n      { label: \"Import DSL .ifo\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('importDict') } },\n\n      { type: \"separator\" },\n      { label: \"Export  .dgl-dict\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('exportDGL-dict') } },\n\n    ]\n  }\n  return menu\n}\n","import { app, BrowserWindow } from \"electron\";\nimport { i18n as t } from \"./i18n\";\nlet log  = console.log\n\nexport function fileMenuTemplate() {\n  let menu =  {\n    label: \"File\",\n    submenu: [\n      {  label: t(\"home\"),\n         accelerator: \"CmdOrCtrl+H\",\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'home') } },\n\n      {  label: t(\"sign in\"),\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'signin') } },\n\n      {  label: t(\"sign up\"),\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'signup') } },\n\n      { type: \"separator\" },\n\n      { type: \"separator\" },\n\n      {  label: t(\"Preferences\"),\n         click: () => { BrowserWindow.getFocusedWindow().webContents.send('route', 'prefsapp') } },\n\n      { type: \"separator\" },\n\n      { label: t(\"Quit\"),\n        accelerator: \"CmdOrCtrl+Q\",\n        click: () => {\n          app.quit();\n        }\n      }\n    ]\n  }\n  return menu\n}\n","import { app, BrowserWindow, shell } from \"electron\"\nimport { i18n as t } from \"./i18n\"\nconst os = require('os')\n\nlet href\n\nexport function helpMenuTemplate() {\n  let menu =  {\n    label: t(\"Help\"),\n    submenu: [\n      { label: t(\"Website\"), click: () => {\n        href = 'http://diglossa.org/diglossa.js'\n        shell.openExternal(href)\n      } },\n      { label: t(\"Source Code\"), click: () => {\n        href = 'https://github.com/mbykov/diglossa.js/'\n        shell.openExternal(href)\n      } },\n      { label: t(\"Report an Issue…\"), click: () => {\n        href = 'https://github.com/mbykov/diglossa.js/issues/new/'\n        console.log('INFO', debugInfo())\n        let body = debugInfo()\n        href = [href, body].join('?body=')\n        shell.openExternal(href)\n      } },\n\t    { label: 'Show App Data',\n\t\t    click() {\n\t\t\t    shell.openItem(app.getPath('userData'));\n\t\t    }\n\t    },\n      { label: t(\"hot keys\"), accelerator: \"CmdOrCtrl+H\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('section', 'help') } },\n      { label: \"Reload\", accelerator: \"CmdOrCtrl+R\", click: () => { BrowserWindow.getFocusedWindow().webContents.reloadIgnoringCache(); }  },\n      { label: \"Re-Read\", accelerator: \"Shift+CmdOrCtrl+R\", click: () => { BrowserWindow.getFocusedWindow().webContents.send('action', 're-read-file') }  },\n      { label: t(\"Toggle devTools\"),\n        accelerator: \"Alt+CmdOrCtrl+I\",\n        click: () => {\n          BrowserWindow.getFocusedWindow().toggleDevTools();\n        }\n      }\n    ]\n  }\n  return menu\n}\n\nfunction debugInfo() {\n  let debugInfo = `${app.getName()} ${app.getVersion()}\n            ${process.platform} ${os.release()}\n            Locale: ${app.getLocale()}\n            `.trim()\n  return debugInfo\n}\n","'use strict'\n\nconst path = require(\"path\")\nconst electron = require('electron')\nconst fse = require('fs-extra')\nconst config = require('../config')\nconst { ipcMain } = require('electron')\nconst log = console.log\n\nlet app = electron.app ? electron.app : electron.remote.app\nlet apath = app.getAppPath()\nlet content = {}\n\nlet lang = config.deflang\nipcMain.on('lang', (event, newlang) => {\n  lang = newlang\n})\n\nlet loadedLanguage\nexport function i18n(phrase) {\n  if (!content[lang]) {\n    let langFile = lang + '.js'\n    let localePath = path.resolve(apath, 'src/i18n', langFile)\n\t  if (fse.pathExistsSync(localePath)) {\n\t\t  loadedLanguage = fse.readJsonSync(localePath)\n\t  } else {\n      let enPath = path.resolve(apath, 'src/i18n/eng.js')\n\t\t  loadedLanguage = fse.readJsonSync(enPath)\n\t  }\n    content[lang] = loadedLanguage\n  }\n  let dcased = uncap(phrase)\n  let caped = capitalize(content[lang][dcased]) || capitalize(phrase)\n  return caped\n}\n\nconst capitalize = (s) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nconst uncap = (s) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toLowerCase() + s.slice(1)\n}\n","import { app, BrowserWindow, ipcRenderer } from \"electron\";\n\nexport const deuMenuTemplate = {\n  label: \"DEU\",\n  submenu: [\n    {\n      label: \"ENG\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'eng')\n      }\n    },\n    {\n      label: \"RUS\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'rus')\n      }\n    },\n    // {\n    //   label: \"TIB\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'tib')\n    //   }\n    // },\n    // {\n    //   label: \"ZHO\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'zho')\n    //   }\n    // }\n  ]\n};\n","import { app, BrowserWindow } from \"electron\";\n\nexport const engMenuTemplate = {\n  label: \"ENG\",\n  submenu: [\n    {\n      label: \"DEU\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'deu')\n      }\n    },\n    {\n      label: \"RUS\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'rus')\n      }\n    },\n    // {\n    //   label: \"TIB\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'tib')\n    //   }\n    // },\n    // {\n    //   label: \"ZHO\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'zho')\n    //   }\n    // }\n  ]\n};\n","import { app, BrowserWindow, ipcRenderer } from \"electron\";\n\nexport const rusMenuTemplate = {\n  label: \"RUS\",\n  submenu: [\n    {\n      label: \"DEU\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'deu')\n      }\n    },\n    {\n      label: \"ENG\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'eng')\n      }\n    },\n    // {\n    //   label: \"TIB\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'tib')\n    //   }\n    // },\n    // {\n    //   label: \"ZHO\",\n    //   click: () => {\n    //     BrowserWindow.getFocusedWindow().webContents.send('lang', 'zho')\n    //   }\n    // }\n  ]\n};\n","import { app, BrowserWindow, ipcRenderer } from \"electron\";\n\nexport const zhoMenuTemplate = {\n  label: \"ZHO\",\n  submenu: [\n    {\n      label: \"ENG\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'eng')\n      }\n    },\n    {\n      label: \"DEU\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'deu')\n      }\n    },\n    {\n      label: \"RUS\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'rus')\n      }\n    },\n    {\n      label: \"TIB\",\n      click: () => {\n        BrowserWindow.getFocusedWindow().webContents.send('lang', 'tib')\n      }\n    }\n  ]\n};\n","const Menu = require('electron').Menu;\n// import env from \"env\";\nconst log = console.log\n\nimport { fileMenuTemplate } from \"./file_menu_template\";\nimport { bookMenuTemplate } from \"./book_menu_template\";\nimport { dictMenuTemplate } from \"./dict_menu_template\";\nimport { aboutMenuTemplate } from \"./about_menu_template\";\n// import { editMenuTemplate } from \"./edit_menu_template\";\nimport { helpMenuTemplate } from \"./help_menu_template\";\n\nimport { deuMenuTemplate } from \"./lang_deu_menu_template\";\nimport { engMenuTemplate } from \"./lang_eng_menu_template\";\nimport { rusMenuTemplate } from \"./lang_rus_menu_template\";\nimport { zhoMenuTemplate } from \"./lang_zho_menu_template\";\n\n// const menu = null;\n// const platform = process.platform;\n\nexport function MenuFactory(lang) {\n  const menus = [fileMenuTemplate(), bookMenuTemplate(), dictMenuTemplate(), aboutMenuTemplate(), helpMenuTemplate()];\n\n  // if (env.name !== \"production\") {\n  //   menus.push(devMenuTemplate);\n  // }\n  // menus.push(langMenuTemplate);\n\n  switch(lang) {\n  case 'eng':\n    menus.push(engMenuTemplate);\n    break\n  case 'deu':\n    menus.push(deuMenuTemplate);\n    break\n  case 'rus':\n    menus.push(rusMenuTemplate);\n    break\n  case 'zho':\n    menus.push(zhoMenuTemplate);\n    break\n  default:\n    menus.push(engMenuTemplate);\n  }\n\n  Menu.setApplicationMenu(Menu.buildFromTemplate(menus));\n}\n","module.exports = require(\"@babel/runtime/helpers/asyncIterator\");;","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");;","module.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");;","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");;","module.exports = require(\"@babel/runtime/regenerator\");;","module.exports = require(\"book-md2json\");;","module.exports = require(\"electron\");;","module.exports = require(\"electron-store\");;","module.exports = require(\"epub\");;","module.exports = require(\"fs-extra\");;","module.exports = require(\"iconv-lite\");;","module.exports = require(\"iso-639-3\");;","module.exports = require(\"jsdom\");;","module.exports = require(\"lodash\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"pdf-extraction\");;","module.exports = require(\"unzipper\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"xml-js\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/background.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}